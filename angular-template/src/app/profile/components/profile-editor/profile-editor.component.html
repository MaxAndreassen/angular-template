<div class="user-profile-page">
  <div class="banner"></div>
  <div class="container">
    <div class="container-summary card card-body mt-4">
      <div class="card-content">
        <!--<app-sanitized-image class="uploader-image profile-photo" *ngIf="!!profilePictureUrl" [chosenUrl]="profilePictureUrl"></app-sanitized-image>!-->
        <div class="profile-picture shadow-sm">
          <div class="uploader-image"
               alt="Profile picture"
               [style.background-image]="editor?.profileUrl ? 'url(' + editor?.profileUrl + ')' : 'url(assets/user.svg)'"></div>
        </div>
      </div>
      <!--<app-loading-spinner *ngIf="loading"></app-loading-spinner>-->
      <div *ngIf="!initialPageLoading">
        <h1 class="name allergen-directory-title">
          {{firstName}} {{lastName}}
          <!--<app-verified-user-indicator *ngIf="model?.influencer"></app-verified-user-indicator>-->
        </h1>
        <p class="text-center text-muted">
          {{editor?.username}}
          <!--<span *ngIf="model.emailAddress">| {{model.emailAddress}}</span>-->
        </p>

        <span *ngIf="!initialPageLoading && paymentProviderAccountCreated && !paymentCheckLoading"
              class="badge badge-success mx-auto d-table">Ready To Sell</span>

        <app-loading-spinner *ngIf="paymentCheckLoading"></app-loading-spinner>
      </div>
    </div>

    <div class="pt-2 pt-md-2"
         *ngIf="!initialPageLoading && !paymentProviderAccountCreated && !paymentCheckLoading">
      <div class="alert alert-warning mb-0">
        <form class="m-3">
          <p class="description text-center">There's more you need to do before you can start selling on GameAssets.io</p>
          <button type="button"
                  class="mx-auto d-block btn btn-primary"
                  [disabled]="paymentLinkLoading || loading"
                  (click)="paymentOnboarding()">Setup Payouts</button>
        </form>
      </div>
    </div>

    <app-loading-spinner *ngIf="initialPageLoading || paymentLinkLoading"></app-loading-spinner>

    <div class="pt-2 pt-md-2"
         *ngIf="!initialPageLoading">
      <div class="card">
        <form class="m-3">
          <div class="row">
            <div class="form-group col-6">
              <label for="firstName">
                <b>First Name</b>
              </label>
              <input type="text"
                     name="firstName"
                     class="form-control"
                     id="firstName"
                     [(ngModel)]="editor.firstName">
            </div>
            <div class="form-group  col-6">
              <label for="lastName">
                <b>Last Name</b>
              </label>
              <input type="text"
                     name="lastName"
                     class="form-control"
                     id="lastName"
                     [(ngModel)]="editor.lastName">
            </div>
            <div class="form-group col-12">
              <app-file-uploader *ngIf="!loading"
                                 name="Profile Image"
                                 image="true"
                                 [existingFiles]="existingProfileImage"
                                 (uploadsChanged)="updateProfileImage($event)"
                                 (existingFilesChanged)="updateExistingProfileImage($event)"></app-file-uploader>
            </div>
          </div>
          <div>
            <button type="button"
                    class="w-100 btn btn-primary"
                    [disabled]="loading"
                    (click)="update()">Update</button>
          </div>

          <app-loading-spinner *ngIf="loading"></app-loading-spinner>
          <div *ngIf="!validationResult?.valid"
               class="alert alert-danger mt-2"
               role="alert">
            <app-validation-summary [errors]="validationResult?.errors"> </app-validation-summary>
          </div>
          <div *ngIf="successfullyUpdated"
               class="alert alert-success mt-2"
               role="alert">
            Successfully Updated.
          </div>
        </form>
      </div>
    </div>
  </div>
</div>